#!/bin/bash
eval "$(cat ~/.local/share/shelper.sh || curl suderman.github.io/shelper/shelper.sh)"

# App and Var directory
export ROOT=$(cd "$(dirname $(dirname "${BASH_SOURCE[0]}"))" && pwd -P)
mkdir -p "$ROOT/ca"
export CA=$(cd "$ROOT/ca" && pwd -P)

# Populate environment variables
source $ROOT/.env || source $ROOT/.env-sample

# Default fallbacks
defined $DOMAIN      || DOMAIN="localhost"
defined $CA_NAME     || CA_NAME="Certificate Authority"
defined $CA_EMAIL    || CA_EMAIL="ca@$DOMAIN"
defined $COUNTRY     || COUNTRY="Country"
defined $REGION      || REGION="Region"
defined $CITY        || CITY="City"
defined $ORG         || ORG="$DOMAIN CA"
defined $SECURE_PORT || SECURE_PORT="11443"
defined $PUBLIC_PORT || PUBLIC_PORT="11180"
defined $OCSP_PORT   || OCSP_PORT="11188"
defined $CRL_HOST    || CRL_HOST="$DOMAIN:$PUBLIC_PORT"
defined $OCSP_HOST   || OCSP_HOST="$DOMAIN:$OCSP_PORT"
